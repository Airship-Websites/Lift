{{ define "main" }}

{{/* Main content section */}}
{{- partial "section/main.html" . -}}

<section class="section section--basic">
	<div class="wrap">
		<form class="form" id="contactForm">
			<div class="form__field">
				<input type="text" id="firstName" name="firstName" placeholder="First name">
				<span class="form__error" id="firstNameError"></span>
			</div>
			<div class="form__field">
				<input type="text" id="lastName" name="lastName" placeholder="Last name">
				<span class="form__error" id="lastNameError"></span>
			</div>
			<div class="form__field">
				<input type="email" id="email" name="email" placeholder="Your email">
				<span class="form__error" id="emailError"></span>
			</div>
			<div class="form__field">
				<input type="tel" id="phone" name="phone" placeholder="Your phone">
				<span class="form__error" id="phoneError"></span>
			</div>
			<div class="form__field">
				<textarea id="message" name="message" placeholder="How can we help?"></textarea>
				<span class="form__error" id="messageError"></span>
			</div>
			<input type="submit" value="Submit">
		</form>
	</div><!-- .wrap -->
</section>

<div id="confirmationMessage" style="display: none;">
	{{ .Params.message }}
</div>

<script>
	const form = document.getElementById('contactForm');
	const confirmationMessage = document.getElementById('confirmationMessage');

	form.addEventListener('submit', function(event) {
		event.preventDefault();

		if (validateForm()) {
			const formData = new FormData(form);
			const data = Object.fromEntries(formData.entries());

			// Send form values to HubSpot CRM (replace with your implementation)
			sendToHubSpot(data);

			// Show confirmation message
			form.style.display = 'none';
			confirmationMessage.style.display = 'block';
		}
	});

	function validateForm() {
		let isValid = true;

		const firstNameInput = document.getElementById('firstName');
		const lastNameInput = document.getElementById('lastName');
		const emailInput = document.getElementById('email');
		const phoneInput = document.getElementById('phone');
		const messageInput = document.getElementById('message');

		const firstNameError = document.getElementById('firstNameError');
		const lastNameError = document.getElementById('lastNameError');
		const emailError = document.getElementById('emailError');
		const phoneError = document.getElementById('phoneError');
		const messageError = document.getElementById('messageError');

		firstNameError.textContent = '';
		lastNameError.textContent = '';
		emailError.textContent = '';
		phoneError.textContent = '';
		messageError.textContent = '';

		if (firstNameInput.value.trim() === '') {
			firstNameError.textContent = 'Please enter your first name';
			isValid = false;
		}

		if (lastNameInput.value.trim() === '') {
			lastNameError.textContent = 'Please enter your last name';
			isValid = false;
		}

		if (emailInput.value.trim() === '') {
			emailError.textContent = 'Please enter your email';
			isValid = false;
		} else if (!isValidEmail(emailInput.value.trim())) {
			emailError.textContent = 'Please enter a valid email';
			isValid = false;
		}

		if (phoneInput.value.trim() === '') {
			phoneError.textContent = 'Please enter your phone';
			isValid = false;
		} else if (!isValidPhone(phoneInput.value.trim())) {
			phoneError.textContent = 'Please enter a valid phone';
			isValid = false;
		}

		if (messageInput.value.trim() === '') {
			messageError.textContent = 'Please enter a message';
			isValid = false;
		}

		return isValid;
	}

	function isValidEmail(email) {
		// Basic email validation regex
		const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
		return emailRegex.test(email);
	}

	function isValidPhone(phoneNumber) {
		// Basic phone number validation regex
		const phoneRegex = /^\d{10}$/; // Assumes a 10-digit phone number format
		return phoneRegex.test(phoneNumber);
	}

	function sendToHubSpot(data) {
		// Implement your code to send data to HubSpot CRM
		// Example: You can use fetch API or an AJAX request to send data to your server-side code that interacts with HubSpot CRM API.
		// Make sure you have the necessary authentication and endpoint setup to send data to HubSpot CRM.
	}
</script>


{{ end }}
